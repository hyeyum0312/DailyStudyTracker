# Yarn

Yarn은 JavaScript와 Node.js 생태계에서 사용하는 패키지 매니저로, npm의 대안으로 개발되었습니다. 
Facebook, Google, Exponent, Tilde 등 여러 회사가 협력하여 개발한 Yarn은 다음과 같은 기능과 장점을 제공합니다

- 빠른 속도: Yarn은 패키지 **설치 속도가 빠릅니다.** 이를 위해 **병렬 처리와 캐싱 메커니즘을 사용**합니다. 한 번 다운로드한 패키지를 로컬 캐시에 저장하여 이후 설치 시 더 빠르게 처리할 수 있습니다.

- 일관된 설치: Yarn은 yarn.lock 파일을 사용하여 **정확한 의존성 트리를 저장**합니다. 이를 통해 모든 개발자가 동일한 의존성을 설치할 수 있도록 보장합니다.

- 보안성: Yarn은 패키지의 **무결성을 검증하여 보안을 강화**합니다. 패키지 설치 시 체크섬을 확인하여 패키지가 변경되지 않았음을 보장합니다.

- 오프라인 모드: Yarn은 **캐시된 패키지를 활용**하여 **네트워크 연결 없이도 패키지를 설치**할 수 있습니다. 이는 특히 네트워크가 불안정한 환경에서 유용합니다.

- 워크스페이스: Yarn은 여러 패키지를 하나의 리포지토리에서 관리할 수 있는 **워크스페이스(workspaces) 기능을 제공합니다.** 이를 통해 **모노레포(monorepo) 환경**에서 효율적으로 패키지를 관리할 수 있습니다.

- 명령어: Yarn은 npm과 유사한 명령어를 사용하지만, 일부 명령어는 다릅니다. 예를 들어 패키지 설치는 다음과 같이 합니다:

```node
yarn add <패키지 이름>
```



---



# YarnBerry

Yarn Berry는 Yarn 패키지 매니저의 두 번째 주요 버전(버전 2 이상)을 지칭하는 이름입니다. 
Yarn Classic(버전 1)과 구별하기 위해 Yarn Berry라는 이름이 사용됩니다. Yarn Berry는 성능, 기능, 보안 측면에서 많은 개선을 도입한 패키지 매니저입니다. 주요 특징은 다음과 같습니다:


PnP (Plug'n'Play) 모드: Yarn Berry는 의존성을 **설치할 때 node_modules 폴더를 생성하지 않습니다.** 대신, **모든 의존성을 .pnp.js 파일에 기록**하고, 이 파일을 통해 **의존성을 관리**합니다. 이는 디스크 사용량을 줄이고, 패키지 로딩 속도를 크게 향상시킵니다.

```node
yarn set version berry
yarn install --pnp

```

Zero-Installs: **저장소에 필요한 패키지와 의존성을 포함**시키는 방식으로, **클론한 즉시 작업을 시작**할 수 있습니다. 이는 **CI/CD 파이프라인에서 시간을 절약**하고, **일관성을 유지**하는 데 도움을 줍니다.


워크스페이스: ***여러 패키지를 하나의 모노레포(monorepo)에서 관리***할 수 있습니다. 이는 **대규모 프로젝트에서 모듈 간의 의존성 관리를 용이**하게 합니다.
```node
yarn workspaces add <패키지 이름>
```


플러그인 시스템: Yarn Berry는 **플러그인 아키텍처를 도입하여, 필요한 기능을 쉽게 추가**할 수 있습니다. 기본 기능을 최소화하고, 플러그인을 통해 다양한 기능을 추가할 수 있게 설계되었습니다.
```node
yarn plugin import <플러그인 이름>
```

향상된 명령어: ***기존 명령어들을 더 직관적이고 강력하게 개선***했습니다. 예를 들어, yarn add는 더 빠르고 안정적으로 작동합니다.

환경 설정 파일: ***.yarnrc.yml*** 파일을 통해 Yarn의 동작을 세밀하게 제어할 수 있습니다. 이는 팀 전체의 환경 설정을 일관되게 유지하는 데 도움을 줍니다.

```node
yarnPath: ".yarn/releases/yarn-berry.js"
nodeLinker: "pnp"
```

CLI 개선: Yarn Berry의 CLI는 더 직관적이고 사용하기 쉽게 개선되었습니다. 명령어 자동 완성, 명령어 도움말 등이 더 향상되었습니다.

Yarn Classic에서 Yarn Berry로 전환하려면 다음 명령어를 사용합니다:
```node
yarn set version berry
```

Yarn Berry는 Yarn Classic에서 발전된 형태로, 더 빠르고 효율적인 패키지 관리를 목표로 합니다. ***특히 PnP 모드와 Zero-Installs 기능은 큰 장점***으로 작용하며, 플러그인 시스템을 통해 필요한 기능을 유연하게 추가할 수 있습니다.